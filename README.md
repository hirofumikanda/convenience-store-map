# 🏪 コンビニエンスストアマップ

日本のコンビニエンスストアを表示し、フィルタリング機能とカバレッジエリア表示を備えたインタラクティブなWebマップです。

## 🎯 機能

- **インタラクティブマップ**: 日本全国のコンビニエンスストアをパン・ズーム・探索
- **チェーン別フィルタリング**: 主要コンビニチェーン（セブンイレブン、ファミリーマート、ローソンなど）で絞り込み
- **店舗情報**: 店舗をクリックすると詳細情報をポップアップで表示
- **カバレッジエリア**: 店舗のサービスエリア（半径約500m）を色分けされたバッファで視覚的に表現
- **人口集中地区（DID）レイヤー**: 都市化地域の表示・非表示切り替え機能
- **凡例表示**: 各コンビニチェーンの色分けと説明を地図左下に表示

## デモ
[GitHub Pagesで公開中](https://hirofumikanda.github.io/convenience-store-map)

## 🚀 クイックスタート

### 前提条件

- Node.js (v18以上)
- npm または yarn

### インストール

```bash
# リポジトリをクローン
git clone https://github.com/hirofumikanda/convenience-store-map.git
cd convenience-store-map

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

アプリケーションは `http://localhost:5173` で利用できます

## 🗺️ データソース

- **店舗データ**: コンビニエンスストアの位置情報とメタデータをOverture Mapsから取得
- **カバレッジエリア**: 推定サービスエリア（半径約500m）を示すバッファポリゴン
- **人口集中地区（DID）**: 国勢調査に基づく人口密度の高い都市化地域データ（国土数値情報）
- **ベースマップ**: 地理院地図の淡色地図
- **フォント**: 日本語テキストレンダリング用のNoto Sansフォントファミリー

## 🏗️ アーキテクチャ

### コンポーネント構造

```
src/
├── components/
│   ├── MapView.tsx          # メインマップコンテナコンポーネント
│   ├── ChainSelector.tsx    # ストアチェーンフィルタードロップダウン
│   ├── LayerToggle.tsx      # レイヤー表示切り替えトグルスイッチ
│   └── Legend.tsx           # 凡例表示コンポーネント
├── hooks/
│   ├── useMapInit.ts        # マップ初期化とセットアップ
│   ├── useMapFilter.ts      # ストアフィルタリングロジック
│   └── useLayerToggle.ts    # レイヤー表示切り替えロジック
└── utils/
    ├── onMapLoad.ts         # マップアイコン読み込みユーティリティ
    ├── popup.ts             # 店舗情報ポップアップハンドラー
    └── pointer.ts           # マウスインタラクションハンドラー
```

### 主要技術

- **React 19** - 最新機能を備えたUIフレームワーク
- **TypeScript** - 型安全な開発
- **MapLibre GL JS** - 高性能ベクターマップレンダリング
- **PMTiles** - 大規模データセット用の効率的なベクタータイル形式
- **Vite** - 高速ビルドツールと開発サーバー

## 🎨 コンビニエンスストアチェーン

マップは主要な日本のコンビニエンスストアチェーンのフィルタリングをサポートしています：

| チェーン | 色 | サポートされるバリエーション |
|----------|----|-----------------------------|
| 🔴 セブンイレブン | 赤 | セブンイレブン, 7-Eleven, Seven-Eleven |
| 🟢 ファミリーマート | 緑 | ファミリーマート, FamilyMart, ファミマ |
| 🔵 ローソン | 青 | ローソン, LAWSON, Lawson |
| 🟣 ミニストップ | 紫 | ミニストップ, Mini Stop, Ministop |
| 🟡 サンクス | 金 | サンクス |

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています。